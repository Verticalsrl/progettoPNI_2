DA RIPORTARE SU SERVER MAPHOSTING


UPDATE mappa_valori_pni2 SET valore='00' WHERE tabella='tratta' AND campo='num_mtubi' AND tipo_progetto='ab' AND valore='0';
UPDATE mappa_valori_pni2 SET valore='01' WHERE tabella='tratta' AND campo='num_mtubi' AND tipo_progetto='ab' AND valore='1';
UPDATE mappa_valori_pni2 SET valore='02' WHERE tabella='tratta' AND campo='num_mtubi' AND tipo_progetto='ab' AND valore='2';
UPDATE mappa_valori_pni2 SET valore='03' WHERE tabella='tratta' AND campo='num_mtubi' AND tipo_progetto='ab' AND valore='3';
UPDATE mappa_valori_pni2 SET valore='04' WHERE tabella='tratta' AND campo='num_mtubi' AND tipo_progetto='ab' AND valore='4';
UPDATE mappa_valori_pni2 SET valore='05' WHERE tabella='tratta' AND campo='num_mtubi' AND tipo_progetto='ab' AND valore='5';
UPDATE mappa_valori_pni2 SET valore='06' WHERE tabella='tratta' AND campo='num_mtubi' AND tipo_progetto='ab' AND valore='6';
UPDATE mappa_valori_pni2 SET valore='07' WHERE tabella='tratta' AND campo='num_mtubi' AND tipo_progetto='ab' AND valore='7';
UPDATE mappa_valori_pni2 SET valore='08' WHERE tabella='tratta' AND campo='num_mtubi' AND tipo_progetto='ab' AND valore='8';
UPDATE mappa_valori_pni2 SET valore='09' WHERE tabella='tratta' AND campo='num_mtubi' AND tipo_progetto='ab' AND valore='9';


INSERT INTO mappa_valori_pni2 (tabella, campo, valore, valore_tipo, not_null, note, campo_alias, tipo_progetto) VALUES ('pozzetti', 'spec_id', 'G3V.1', 'character varying(12)', TRUE, 'aggiunto solo se stato=realizzato', 'tipologia', 'ab');
INSERT INTO mappa_valori_pni2 (tabella, campo, valore, valore_tipo, not_null, note, campo_alias, tipo_progetto) VALUES ('pozzetti', 'spec_id', 'G3V.2', 'character varying(12)', TRUE, 'aggiunto solo se stato=realizzato', 'tipologia', 'ab');




SVILUPPO:
nel caso si volesse trasformare il campo num_cavi in integer ecco la query per OMETTERE i contenuti stringa convertendo SOLO quelli numerici:
SELECT num_cavi, num_cavi::integer FROM pni_grosseto.underground_route WHERE num_cavi ~ '^[0-9]+$';



PER OGNI PROGETTO CD:
"cassina_rizzarzdi"
"castel_boglione"
"pni_bore"
"robbiate"


ALTER SCHEMA cassina_rizzarzdi OWNER TO operatore_r;
ALTER SCHEMA castel_boglione OWNER TO operatore_r;
ALTER SCHEMA robbiate OWNER TO operatore_r;
ALTER SCHEMA pni_bore OWNER TO operatore_r;



PER OGNI PROGETTO CD:
GRANT ALL ON TABLE cassina_rizzarzdi.access_point TO GROUP operatore_r;
...e cosi' via per TUTTE le tabelle dei vari schemi, se gia' non lo hai fatto


--AGGIUNGERE QUESTE COLONNE ANCHE AGLI SHP CHE SI CARICANO NEL CASO NON VI SIANO GIA'! Finora gli shp che mi hanno inviato non tutti avevano questi campi anzi direi quasi nessuno....
--DA VERIFICARE!!
ALTER TABLE pni_ced_template.ebw_location ADD COLUMN constructi character varying(14);
ALTER TABLE pni_ced_template.ebw_route ADD COLUMN diam_minit character varying(100);
ALTER TABLE pni_ced_template.ebw_route ADD COLUMN num_mtubi character varying(100);
ALTER TABLE pni_ced_template.ebw_route ADD COLUMN diam_tubo character varying(100);
ALTER TABLE pni_ced_template.ebw_route ADD COLUMN num_tubi character varying(100);
ALTER TABLE pni_ced_template.ebw_route ADD COLUMN constructi character varying(14);
ALTER TABLE pni_ced_template.ebw_route ADD COLUMN scavo_a_mano boolean;


