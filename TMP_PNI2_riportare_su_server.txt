DA RIPORTARE SU SERVER MAPHOSTING


PER OGNI PROGETTO AB
ALTER TABLE pni_aib_template.mit_bay ALTER COLUMN tipo_posa SET DEFAULT 'F';


CONTROLLA!! forse c'è già ma a loro NON RISULTA
INSERT INTO mappa_valori_pni2(tabella, campo, valore, valore_tipo, not_null, note, campo_alias, tipo_progetto) VALUES ('tratta', 'num_mtubi', '0', 'character varying(100)', FALSE, '', 'numero minitubi', 'ab');



SVILUPPO:
nel caso si volesse trasformare il campo num_cavi in integer ecco la query per OMETTERE i contenuti stringa convertendo SOLO quelli numerici:
SELECT num_cavi, num_cavi::integer FROM pni_grosseto.underground_route WHERE num_cavi ~ '^[0-9]+$';



PER OGNI PROGETTO CD:
"cassina_rizzarzdi"
"castel_boglione"
"pni_bore"
"robbiate"


ALTER SCHEMA cassina_rizzarzdi OWNER TO operatore_r;
ALTER SCHEMA castel_boglione OWNER TO operatore_r;
ALTER SCHEMA robbiate OWNER TO operatore_r;
ALTER SCHEMA pni_bore OWNER TO operatore_r;



AGGIORNAMENTO tabella MAPPA_VALORI:
DELETE FROM mappa_valori_pni2 WHERE tabella='ebw_location' AND campo = 'tipo' AND valore IN ('Armadio Telecom', 'BTS', 'Centrali Telecom', 'Edificio', 'Pac Pal', 'PFP', 'PFS', 'POP', 'Pozzetto Virtuale', 'Sconosciuto', 'Traliccio');
INSERT INTO mappa_valori_pni2(tabella, campo, valore, valore_tipo, not_null, note, campo_alias, tipo_progetto) VALUES ('ebw_location', 'tipo', 'Pozzetto 90x70', 'character varying(100)', TRUE, NULL, 'tipologia', 'cd');
INSERT INTO mappa_valori_pni2(tabella, campo, valore, valore_tipo, not_null, note, campo_alias, tipo_progetto) VALUES ('ebw_location', 'tipo', 'Virtuale', 'character varying(100)', TRUE, NULL, 'tipologia', 'cd');


UPDATE mappa_valori_pni2 SET valore='00' WHERE tabella='tratta' AND campo='num_cavi' AND tipo_progetto='ab' AND valore='0';
UPDATE mappa_valori_pni2 SET valore='01' WHERE tabella='tratta' AND campo='num_cavi' AND tipo_progetto='ab' AND valore='1';
UPDATE mappa_valori_pni2 SET valore='02' WHERE tabella='tratta' AND campo='num_cavi' AND tipo_progetto='ab' AND valore='2';
UPDATE mappa_valori_pni2 SET valore='03' WHERE tabella='tratta' AND campo='num_cavi' AND tipo_progetto='ab' AND valore='3';
UPDATE mappa_valori_pni2 SET valore='04' WHERE tabella='tratta' AND campo='num_cavi' AND tipo_progetto='ab' AND valore='4';
UPDATE mappa_valori_pni2 SET valore='05' WHERE tabella='tratta' AND campo='num_cavi' AND tipo_progetto='ab' AND valore='5';
UPDATE mappa_valori_pni2 SET valore='06' WHERE tabella='tratta' AND campo='num_cavi' AND tipo_progetto='ab' AND valore='6';
UPDATE mappa_valori_pni2 SET valore='07' WHERE tabella='tratta' AND campo='num_cavi' AND tipo_progetto='ab' AND valore='7';
UPDATE mappa_valori_pni2 SET valore='08' WHERE tabella='tratta' AND campo='num_cavi' AND tipo_progetto='ab' AND valore='8';
UPDATE mappa_valori_pni2 SET valore='09' WHERE tabella='tratta' AND campo='num_cavi' AND tipo_progetto='ab' AND valore='9';

UPDATE mappa_valori_pni2 SET valore='00' WHERE tabella='tratta_aerea' AND campo='num_cavi' AND tipo_progetto='ab' AND valore='0';
UPDATE mappa_valori_pni2 SET valore='01' WHERE tabella='tratta_aerea' AND campo='num_cavi' AND tipo_progetto='ab' AND valore='1';
UPDATE mappa_valori_pni2 SET valore='02' WHERE tabella='tratta_aerea' AND campo='num_cavi' AND tipo_progetto='ab' AND valore='2';
UPDATE mappa_valori_pni2 SET valore='03' WHERE tabella='tratta_aerea' AND campo='num_cavi' AND tipo_progetto='ab' AND valore='3';
UPDATE mappa_valori_pni2 SET valore='04' WHERE tabella='tratta_aerea' AND campo='num_cavi' AND tipo_progetto='ab' AND valore='4';
UPDATE mappa_valori_pni2 SET valore='05' WHERE tabella='tratta_aerea' AND campo='num_cavi' AND tipo_progetto='ab' AND valore='5';
UPDATE mappa_valori_pni2 SET valore='06' WHERE tabella='tratta_aerea' AND campo='num_cavi' AND tipo_progetto='ab' AND valore='6';
UPDATE mappa_valori_pni2 SET valore='07' WHERE tabella='tratta_aerea' AND campo='num_cavi' AND tipo_progetto='ab' AND valore='7';
UPDATE mappa_valori_pni2 SET valore='08' WHERE tabella='tratta_aerea' AND campo='num_cavi' AND tipo_progetto='ab' AND valore='8';
UPDATE mappa_valori_pni2 SET valore='09' WHERE tabella='tratta_aerea' AND campo='num_cavi' AND tipo_progetto='ab' AND valore='9';


INSERT INTO mappa_valori_pni2(tabella, campo, valore, valore_tipo, not_null, note, campo_alias, tipo_progetto) VALUES ('pozzetti', 'spec_id', '45x45', 'character varying(12)', TRUE, NULL, 'tipologia', 'ab');
INSERT INTO mappa_valori_pni2(tabella, campo, valore, valore_tipo, not_null, note, campo_alias, tipo_progetto) VALUES ('pozzetti', 'spec_id', '36x89', 'character varying(12)', TRUE, NULL, 'tipologia', 'ab');
INSERT INTO mappa_valori_pni2(tabella, campo, valore, valore_tipo, not_null, note, campo_alias, tipo_progetto) VALUES ('pozzetti', 'spec_id', '19x42', 'character varying(12)', TRUE, NULL, 'tipologia', 'ab');
INSERT INTO mappa_valori_pni2(tabella, campo, valore, valore_tipo, not_null, note, campo_alias, tipo_progetto) VALUES ('pozzetti', 'spec_id', 'Giunto a 3 vie tipo 1', 'character varying(12)', TRUE, 'da aggiungere solo se stato=realizzato', 'tipologia', 'ab');
INSERT INTO mappa_valori_pni2(tabella, campo, valore, valore_tipo, not_null, note, campo_alias, tipo_progetto) VALUES ('pozzetti', 'spec_id', 'Giunto a 3 vie tipo 2', 'character varying(12)', TRUE, 'da aggiungere solo se stato=realizzato', 'tipologia', 'ab');
INSERT INTO mappa_valori_pni2(tabella, campo, valore, valore_tipo, not_null, note, campo_alias, tipo_progetto) VALUES ('pozzetti', 'spec_id', 'Verticale', 'character varying(12)', TRUE, 'da aggiungere solo se stato=realizzato', 'tipologia', 'ab');


DELETE FROM mappa_valori_pni2 WHERE tabella='ebw_route' AND campo = 'proprietar' AND valore IN ('Lepida', 'Enel Sole');
DELETE FROM mappa_valori_pni2 WHERE tabella='ebw_route' AND campo = 'proprietar' AND valore IN ('Sconosciuto', 'Altro', 'Privato', 'Pubblica', 'TIM');
INSERT INTO mappa_valori_pni2(tabella, campo, valore, valore_tipo, not_null, note, campo_alias, tipo_progetto) VALUES ('ebw_route', 'proprietar', 'Sconosciuto', 'character varying(11)', TRUE, NULL, 'proprietario', 'cd');
INSERT INTO mappa_valori_pni2(tabella, campo, valore, valore_tipo, not_null, note, campo_alias, tipo_progetto) VALUES ('ebw_route', 'proprietar', 'Privato', 'character varying(11)', TRUE, NULL, 'proprietario', 'cd');
INSERT INTO mappa_valori_pni2(tabella, campo, valore, valore_tipo, not_null, note, campo_alias, tipo_progetto) VALUES ('ebw_route', 'proprietar', 'Altro', 'character varying(11)', TRUE, NULL, 'proprietario', 'cd');
INSERT INTO mappa_valori_pni2(tabella, campo, valore, valore_tipo, not_null, note, campo_alias, tipo_progetto) VALUES ('ebw_route', 'proprietar', 'TIM', 'character varying(11)', TRUE, NULL, 'proprietario', 'cd');
INSERT INTO mappa_valori_pni2(tabella, campo, valore, valore_tipo, not_null, note, campo_alias, tipo_progetto) VALUES ('ebw_route', 'proprietar', 'Pubblica', 'character varying(11)', TRUE, NULL, 'proprietario', 'cd');
INSERT INTO mappa_valori_pni2(tabella, campo, valore, valore_tipo, not_null, note, campo_alias, tipo_progetto) VALUES ('ebw_route', 'proprietar', NULL, 'character varying(11)', TRUE, NULL, 'proprietario', 'cd');


INSERT INTO mappa_valori_pni2(tabella, campo, valore, valore_tipo, not_null, note, campo_alias, tipo_progetto) VALUES ('ebw_route', 'constructi', 'Progettato', 'character varying(14)', TRUE, NULL, 'stato', 'cd');
INSERT INTO mappa_valori_pni2(tabella, campo, valore, valore_tipo, not_null, note, campo_alias, tipo_progetto) VALUES ('ebw_route', 'constructi', 'Realizzato', 'character varying(14)', TRUE, NULL, 'stato', 'cd');
INSERT INTO mappa_valori_pni2(tabella, campo, valore, valore_tipo, not_null, note, campo_alias, tipo_progetto) VALUES ('ebw_route', 'constructi', NULL, 'character varying(14)', TRUE, NULL, 'stato', 'cd');


INSERT INTO mappa_valori_pni2(tabella, campo, valore, valore_tipo, not_null, note, campo_alias, tipo_progetto) VALUES ('ebw_location', 'constructi', 'Progettato', 'character varying(14)', TRUE, NULL, 'stato', 'cd');
INSERT INTO mappa_valori_pni2(tabella, campo, valore, valore_tipo, not_null, note, campo_alias, tipo_progetto) VALUES ('ebw_location', 'constructi', 'Realizzato', 'character varying(14)', TRUE, NULL, 'stato', 'cd');
INSERT INTO mappa_valori_pni2(tabella, campo, valore, valore_tipo, not_null, note, campo_alias, tipo_progetto) VALUES ('ebw_location', 'constructi', NULL, 'character varying(14)', TRUE, NULL, 'stato', 'cd');


INSERT INTO mappa_valori_pni2(tabella, campo, valore, valore_tipo, not_null, note, campo_alias, tipo_progetto) VALUES ('ebw_cavo', 'potenziali', 288, 'character varying(3)', TRUE, NULL, 'varie', 'cd');
INSERT INTO mappa_valori_pni2(tabella, campo, valore, valore_tipo, not_null, note, campo_alias, tipo_progetto) VALUES ('ebw_cavo', 'potenziali', NULL, 'character varying(3)', TRUE, NULL, 'varie', 'cd');

INSERT INTO mappa_valori_pni2(tabella, campo, valore, valore_tipo, not_null, note, campo_alias, tipo_progetto) VALUES ('ebw_cavo', 'stato_cost', 'Progettato', 'character varying(14)', TRUE, NULL, 'stato', 'cd');
INSERT INTO mappa_valori_pni2(tabella, campo, valore, valore_tipo, not_null, note, campo_alias, tipo_progetto) VALUES ('ebw_cavo', 'stato_cost', 'Realizzato', 'character varying(14)', TRUE, NULL, 'stato', 'cd');
INSERT INTO mappa_valori_pni2(tabella, campo, valore, valore_tipo, not_null, note, campo_alias, tipo_progetto) VALUES ('ebw_cavo', 'stato_cost', NULL, 'character varying(14)', TRUE, NULL, 'stato', 'cd');


INSERT INTO mappa_valori_pni2(tabella, campo, valore, valore_tipo, not_null, note, campo_alias, tipo_progetto) VALUES ('ebw_route', 'numero_cav', 0, 'character varying(11)', TRUE, NULL, 'numero cavi', 'cd');
INSERT INTO mappa_valori_pni2(tabella, campo, valore, valore_tipo, not_null, note, campo_alias, tipo_progetto) VALUES ('ebw_route', 'numero_cav', 1, 'character varying(11)', TRUE, NULL, 'numero cavi', 'cd');
INSERT INTO mappa_valori_pni2(tabella, campo, valore, valore_tipo, not_null, note, campo_alias, tipo_progetto) VALUES ('ebw_route', 'numero_cav', 2, 'character varying(11)', TRUE, NULL, 'numero cavi', 'cd');
INSERT INTO mappa_valori_pni2(tabella, campo, valore, valore_tipo, not_null, note, campo_alias, tipo_progetto) VALUES ('ebw_route', 'numero_cav', 3, 'character varying(11)', TRUE, NULL, 'numero cavi', 'cd');
INSERT INTO mappa_valori_pni2(tabella, campo, valore, valore_tipo, not_null, note, campo_alias, tipo_progetto) VALUES ('ebw_route', 'numero_cav', 4, 'character varying(11)', TRUE, NULL, 'numero cavi', 'cd');
INSERT INTO mappa_valori_pni2(tabella, campo, valore, valore_tipo, not_null, note, campo_alias, tipo_progetto) VALUES ('ebw_route', 'numero_cav', 5, 'character varying(11)', TRUE, NULL, 'numero cavi', 'cd');
INSERT INTO mappa_valori_pni2(tabella, campo, valore, valore_tipo, not_null, note, campo_alias, tipo_progetto) VALUES ('ebw_route', 'numero_cav', 6, 'character varying(11)', TRUE, NULL, 'numero cavi', 'cd');
INSERT INTO mappa_valori_pni2(tabella, campo, valore, valore_tipo, not_null, note, campo_alias, tipo_progetto) VALUES ('ebw_route', 'numero_cav', 7, 'character varying(11)', TRUE, NULL, 'numero cavi', 'cd');
INSERT INTO mappa_valori_pni2(tabella, campo, valore, valore_tipo, not_null, note, campo_alias, tipo_progetto) VALUES ('ebw_route', 'numero_cav', 8, 'character varying(11)', TRUE, NULL, 'numero cavi', 'cd');
INSERT INTO mappa_valori_pni2(tabella, campo, valore, valore_tipo, not_null, note, campo_alias, tipo_progetto) VALUES ('ebw_route', 'numero_cav', 9, 'character varying(11)', TRUE, NULL, 'numero cavi', 'cd');
INSERT INTO mappa_valori_pni2(tabella, campo, valore, valore_tipo, not_null, note, campo_alias, tipo_progetto) VALUES ('ebw_route', 'numero_cav', 10, 'character varying(11)', TRUE, NULL, 'numero cavi', 'cd');
INSERT INTO mappa_valori_pni2(tabella, campo, valore, valore_tipo, not_null, note, campo_alias, tipo_progetto) VALUES ('ebw_route', 'numero_cav', 11, 'character varying(11)', TRUE, NULL, 'numero cavi', 'cd');
INSERT INTO mappa_valori_pni2(tabella, campo, valore, valore_tipo, not_null, note, campo_alias, tipo_progetto) VALUES ('ebw_route', 'numero_cav', 12, 'character varying(11)', TRUE, NULL, 'numero cavi', 'cd');
INSERT INTO mappa_valori_pni2(tabella, campo, valore, valore_tipo, not_null, note, campo_alias, tipo_progetto) VALUES ('ebw_route', 'numero_cav', 13, 'character varying(11)', TRUE, NULL, 'numero cavi', 'cd');
INSERT INTO mappa_valori_pni2(tabella, campo, valore, valore_tipo, not_null, note, campo_alias, tipo_progetto) VALUES ('ebw_route', 'numero_cav', 14, 'character varying(11)', TRUE, NULL, 'numero cavi', 'cd');
INSERT INTO mappa_valori_pni2(tabella, campo, valore, valore_tipo, not_null, note, campo_alias, tipo_progetto) VALUES ('ebw_route', 'numero_cav', 15, 'character varying(11)', TRUE, NULL, 'numero cavi', 'cd');
INSERT INTO mappa_valori_pni2(tabella, campo, valore, valore_tipo, not_null, note, campo_alias, tipo_progetto) VALUES ('ebw_route', 'numero_cav', 16, 'character varying(11)', TRUE, NULL, 'numero cavi', 'cd');
INSERT INTO mappa_valori_pni2(tabella, campo, valore, valore_tipo, not_null, note, campo_alias, tipo_progetto) VALUES ('ebw_route', 'numero_cav', 17, 'character varying(11)', TRUE, NULL, 'numero cavi', 'cd');
INSERT INTO mappa_valori_pni2(tabella, campo, valore, valore_tipo, not_null, note, campo_alias, tipo_progetto) VALUES ('ebw_route', 'numero_cav', 18, 'character varying(11)', TRUE, NULL, 'numero cavi', 'cd');
INSERT INTO mappa_valori_pni2(tabella, campo, valore, valore_tipo, not_null, note, campo_alias, tipo_progetto) VALUES ('ebw_route', 'numero_cav', 19, 'character varying(11)', TRUE, NULL, 'numero cavi', 'cd');
INSERT INTO mappa_valori_pni2(tabella, campo, valore, valore_tipo, not_null, note, campo_alias, tipo_progetto) VALUES ('ebw_route', 'numero_cav', 20, 'character varying(11)', TRUE, NULL, 'numero cavi', 'cd');








PER OGNI PROGETTO CD:
GRANT ALL ON TABLE cassina_rizzarzdi.access_point TO GROUP operatore_r;
...e cosi' via per TUTTE le tabelle dei vari schemi, se gia' non lo hai fatto


--AGGIUNGERE QUESTE COLONNE ANCHE AGLI SHP CHE SI CARICANO NEL CASO NON VI SIANO GIA'! Finora gli shp che mi hanno inviato non tutti avevano questi campi anzi direi quasi nessuno....
--DA VERIFICARE!!
ALTER TABLE pni_ced_template.ebw_location ADD COLUMN constructi character varying(14);
ALTER TABLE pni_ced_template.ebw_route ADD COLUMN diam_minit character varying(100);
ALTER TABLE pni_ced_template.ebw_route ADD COLUMN num_mtubi character varying(100);
ALTER TABLE pni_ced_template.ebw_route ADD COLUMN diam_tubo character varying(100);
ALTER TABLE pni_ced_template.ebw_route ADD COLUMN num_tubi character varying(100);
ALTER TABLE pni_ced_template.ebw_route ADD COLUMN constructi character varying(14);
ALTER TABLE pni_ced_template.ebw_route ADD COLUMN scavo_a_mano boolean;


